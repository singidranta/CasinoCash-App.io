import{T as fe}from"./vendor-4QxL1Nz2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const q={balances:{gcoin:0,real_balance:0},storageKey:"app_wallet",init(){try{const e=localStorage.getItem(this.storageKey);e?this.balances=JSON.parse(e):(this.balances.gcoin=1e3,this.balances.real_balance=5,this.save())}catch(e){console.error("Failed to load wallet from storage",e)}this.updateDisplay()},getBalance(e="gcoin"){return this.balances[e]},updateBalance(e,t){Object.prototype.hasOwnProperty.call(this.balances,e)?(this.balances[e]=t,this.save(),this.updateDisplay()):console.error(`Currency ${e} not found.`)},add(e,t="gcoin"){Object.prototype.hasOwnProperty.call(this.balances,t)&&(this.balances[t]+=e,this.save(),this.updateDisplay())},subtract(e,t="gcoin"){return Object.prototype.hasOwnProperty.call(this.balances,t)&&this.balances[t]>=e?(this.balances[t]-=e,this.save(),this.updateDisplay(),!0):!1},save(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.balances))}catch(e){console.error("Failed to save wallet to storage",e)}},updateDisplay(){const e=document.getElementById("gcoin-balance");if(e)try{e.textContent=this.balances.gcoin.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}catch{e.textContent=String(this.balances.gcoin)}const t=document.getElementById("real-balance-amount");if(t)try{t.textContent=this.balances.real_balance.toLocaleString("en-US",{style:"currency",currency:"USD"})}catch{t.textContent=`$${Number(this.balances.real_balance).toFixed(2)}`}const n=document.getElementById("game-balance-amount");if(n)try{n.textContent=this.balances.gcoin.toLocaleString("en-US")}catch{n.textContent=String(this.balances.gcoin)}}},Ee={storageKey:"gcoin_settings",config:{sound:!0,backgroundAnimation:!0,soundVolume:45,tonRecipient:""},init(){try{const e=localStorage.getItem(this.storageKey);e&&(this.config=JSON.parse(e));const t=localStorage.getItem("ton_recipient");t&&(this.config.tonRecipient=t)}catch(e){console.error("Failed to load settings from storage",e)}this.applyToUI(),this.listenForChanges(),this.bindWalletStatus()},save(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.config)),console.log("Settings saved:",this.config)}catch(e){console.error("Failed to save settings to storage",e)}},applyToUI(){const e=document.getElementById("sound-toggle"),t=document.getElementById("bg-animation-toggle"),n=document.getElementById("sound-volume"),o=document.getElementById("ton-recipient-input");e&&(e.checked=this.config.sound),t&&(t.checked=this.config.backgroundAnimation),n&&(n.value=this.config.soundVolume),o&&(o.value=this.config.tonRecipient||"")},listenForChanges(){const e=document.getElementById("sound-toggle"),t=document.getElementById("bg-animation-toggle"),n=document.getElementById("sound-volume"),o=document.getElementById("ton-recipient-input");e&&e.addEventListener("change",a=>{this.config.sound=a.target.checked,this.save()}),t&&t.addEventListener("change",a=>{this.config.backgroundAnimation=a.target.checked,this.save()}),n&&n.addEventListener("input",a=>{this.config.soundVolume=Number(a.target.value),this.save()}),o&&o.addEventListener("change",a=>{const s=String(a.target.value||"").trim();this.config.tonRecipient=s;try{localStorage.setItem("ton_recipient",s)}catch{}this.save()})},bindWalletStatus(){const e=document.querySelector(".wallet-placeholder"),t=n=>{if(e)if(n){const o=`${n.slice(0,6)}...${n.slice(-4)}`;e.textContent=`Подключено: ${o}`}else e.textContent="Не подключено"};try{window.addEventListener("ton-status",n=>{var o;t(((o=n==null?void 0:n.detail)==null?void 0:o.address)||null)})}catch{}}},ie={lottery:{key:"lottery",name:"Scratch Lottery",description:"Выберите билет (Bronze/Silver/Gold), купите и сотрите поле монеткой, чтобы узнать выигрыш.",type:"lottery",minBet:10,maxBet:250,defaultBet:25,winChance:.2,winMultiplier:5},coinflip:{key:"coinflip",name:"Coin Flip",description:"Выберите сторону и удвойте ставку при верном угадывании.",type:"coinflip",minBet:10,maxBet:300,defaultBet:20,options:["Орёл","Решка"]},crash:{key:"crash",name:"Crash",description:"Следите за ракетой и выводите до взрыва. Настройте автостоп.",type:"crash",minBet:5,maxBet:500,defaultBet:30,multipliers:[1.5,2,3,5],maxAutoStop:10}};function se(e,t){const n=ie[e];if(!n)return 0;const o=Number.isFinite(t)?t:n.defaultBet;return Math.min(Math.max(o,n.minBet),n.maxBet)}function Ce(e){return ie[e]||null}function re(e,t){const n=ie[e];if(!n)return!1;const o=se(e,t??n.defaultBet);return q.getBalance("gcoin")>=o}function ce(e,t){const n=se(e,t);if(!q.subtract(n,"gcoin"))throw new Error("Недостаточно gcoin для ставки");return n}function Q(e){e>0&&q.add(e,"gcoin")}function xe(e,t){const n=se("coinflip",t),o=Math.random()<.5?"Орёл":"Решка",a=e===o,s=a?n*2:0;return Q(s),{win:a,bet:n,reward:s,result:o,message:a?`Вы угадали! Баланс пополнен на ${s.toFixed(2)} gcoin.`:`Выпало "${o}". Ставка проиграна.`}}function Se(e,t={}){if(!e)throw new Error("ScratchEngine: hostEl is required");const n={radius:Math.max(6,t.radius||16),cover:t.cover||"#B7BEC5",opacity:t.opacity??1,mode:t.mode==="clear"?"clear":"sealed",progressSampleEvery:t.progressSampleEvery||8,revealFadeMs:t.revealFadeMs||240},o=e.style.position;getComputedStyle(e).position==="static"&&(e.style.position="relative");const a=document.createElement("canvas");a.className="scratch-canvas",a.style.position="absolute",a.style.inset="0",a.style.touchAction="none",a.style.userSelect="none",e.appendChild(a);const s=a.getContext("2d",{willReadFrequently:!0}),c=Math.min(2,window.devicePixelRatio||1);let r=0,i=0;function u(){const d=e.getBoundingClientRect();r=Math.max(1,Math.floor(d.width)),i=Math.max(1,Math.floor(d.height)),a.width=Math.floor(r*c),a.height=Math.floor(i*c),a.style.width=r+"px",a.style.height=i+"px",s.setTransform(c,0,0,c,0,0),g()}function g(){s.globalCompositeOperation="source-over",s.clearRect(0,0,r,i);const d=n.mode==="clear"?.06:n.opacity;s.globalAlpha=d,s.fillStyle=n.cover,s.fillRect(0,0,r,i),s.globalAlpha=1,s.globalCompositeOperation="destination-out"}let f=!1,y=0,E=0,v=0,S=!1;const I=new Set;function h(){const d=C();I.forEach(m=>{try{m(d)}catch{}})}function F(d){f=!0;const{x:m,y:w}=$(d);y=m,E=w,p(m,w),v=0}function T(d){if(!f)return;const{x:m,y:w}=$(d);M(y,E,m,w),y=m,E=w,++v%n.progressSampleEvery===0&&h()}function O(){f&&(f=!1,h())}function $(d){const m=a.getBoundingClientRect(),w=(d.touches?d.touches[0].clientX:d.clientX)??0,L=(d.touches?d.touches[0].clientY:d.clientY)??0;return{x:w-m.left,y:L-m.top}}function p(d,m){s.beginPath(),s.arc(d,m,n.radius,0,Math.PI*2),s.fill()}function M(d,m,w,L){const l=w-d,A=L-m,x=Math.hypot(l,A),B=Math.max(1,n.radius*.6),N=l/x,U=A/x;for(let H=0;H<=x;H+=B)p(d+N*H,m+U*H)}function C(){try{const d=Math.max(1,Math.floor(r*c)),m=Math.max(1,Math.floor(i*c)),{data:w}=s.getImageData(0,0,d,m);let L=0;for(let A=3;A<w.length;A+=4)w[A]<16&&L++;const l=d*m;return l?L/l:0}catch{return 0}}function k(d){return typeof d=="function"&&I.add(d),()=>I.delete(d)}function _(){S||(S=!0,a.style.transition=`opacity ${n.revealFadeMs}ms ease`,a.style.opacity="0",setTimeout(()=>{a.remove()},n.revealFadeMs+20),W())}function R(){S=!1,a.style.opacity="1",a.isConnected||e.appendChild(a),g()}function W(){a.removeEventListener("pointerdown",F),window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",O),window.removeEventListener("resize",u)}function z(){W(),a.isConnected&&a.remove(),o&&(e.style.position=o),I.clear()}return a.addEventListener("pointerdown",F),window.addEventListener("pointermove",T,{passive:!0}),window.addEventListener("pointerup",O),window.addEventListener("resize",u),u(),{onProgress:k,getProgressRatio:C,reveal:_,reset:R,destroy:z,canvas:a}}function Ae(e){const t="lottery",n=[{id:"bronze",name:"Bronze",color:"#CD7F32",winChance:.08,multiplier:3,price:15},{id:"silver",name:"Silver",color:"#C0C0C0",winChance:.12,multiplier:5,price:25},{id:"gold",name:"Gold",color:"#D4AF37",winChance:.16,multiplier:8,price:40}];let o=n[1],a=o.price,s=null,c=null,r=null,i=null,u=!1,g=null,f="sealed";const y=new Map,E=new Map;let v=null;function S(d){!d||d.id===o.id||(o=d,a=o.price,i&&(i.destroy(),i=null),u=!1,g=null,I(),e.setStakeInfo(a),e.setMultiplierInfo(o.multiplier,!0),F(),T(),s&&(s.disabled=!1),M(),e.setStatus(`Выберите билет и купите его за ${a.toFixed(2)} gcoin.`,""))}function I(){y.forEach((d,m)=>{d.classList.toggle("active",m===o.id)})}function h(d){f=d==="clear"?"clear":"sealed",E.forEach((w,L)=>{w.classList.toggle("active",L===f)}),r&&C()}function F(){v&&(v.innerHTML=`
      <div class="lottery-summary-title">${o.name} Ticket</div>
      <div class="lottery-summary-row"><span>Стоимость</span><span>${a.toFixed(2)} gcoin</span></div>
      <div class="lottery-summary-row"><span>Шанс</span><span>${Math.round(o.winChance*100)}%</span></div>
      <div class="lottery-summary-row"><span>Множитель</span><span>x${o.multiplier}</span></div>
    `)}function T(d){if(!s)return;const m=`Купить ${o.name} за ${a.toFixed(2)} gcoin`;s.textContent=d||m}function O(){const d=document.createElement("div");d.className="lottery-step";const m=document.createElement("div");m.className="lottery-step-title",m.textContent="1. Выберите билет",d.appendChild(m);const w=document.createElement("div");return w.className="lottery-variant-list",n.forEach(L=>{const l=document.createElement("button");l.type="button",l.className="lottery-variant-card",l.dataset.id=L.id,l.innerHTML=`
        <div class="variant-top">
          <span class="variant-name">${L.name}</span>
          <span class="variant-multiplier">x${L.multiplier}</span>
        </div>
        <div class="variant-meta">
          <span class="lottery-variant-price">${L.price.toFixed(2)} gcoin</span>
          <span class="lottery-variant-chance">${Math.round(L.winChance*100)}%</span>
        </div>
      `,l.addEventListener("click",()=>S(L)),w.appendChild(l),y.set(L.id,l)}),d.appendChild(w),d}function $(){const d=document.createElement("div");d.className="lottery-step";const m=document.createElement("div");m.className="lottery-step-title",m.textContent="2. Режим покрытия",d.appendChild(m);const w=document.createElement("div");w.className="lottery-mode-toggle";const L=document.createElement("button");L.type="button",L.className="toggle-chip",L.textContent="Запечатанный",L.addEventListener("click",()=>h("sealed"));const l=document.createElement("button");return l.type="button",l.className="toggle-chip",l.textContent="Прозрачный",l.addEventListener("click",()=>h("clear")),w.appendChild(L),w.appendChild(l),d.appendChild(w),E.set("sealed",L),E.set("clear",l),h(f),d}function p(){const d=document.createElement("div");d.className="lottery-summary-card";const m=document.createElement("div");return m.className="lottery-step-title",m.textContent="3. Информация о билете",d.appendChild(m),v=document.createElement("div"),v.className="lottery-summary-body",d.appendChild(v),d}function M(){if(!c)return;c.innerHTML="",r=document.createElement("div"),r.className=`ticket-card variant-${o.id}`,r.style.setProperty("--variant-color",o.color);const d=document.createElement("div");d.className="ticket-header",d.innerHTML=`
      <div class="ticket-title">
        <span class="ticket-name">${o.name} Ticket</span>
        <span class="ticket-multiplier">x${o.multiplier}</span>
      </div>
      <div class="ticket-hint">Сотри серое поле монеткой</div>
    `;const m=document.createElement("div");m.className="ticket-body";const w=document.createElement("div");w.className="ticket-result",w.innerHTML='<div class="result-placeholder">Купите билет, чтобы стереть</div>',m.appendChild(w),r.appendChild(d),r.appendChild(m),c.appendChild(r)}function C(){if(!r)return;i&&(i.destroy(),i=null);const d=r.querySelector(".ticket-body");i=Se(d,{radius:18,cover:"#C1C7CE",mode:f}),i.onProgress(m=>{!u&&m>.6&&(u=!0,i.reveal(),k())})}function k(){g&&(g.reward>0&&Q(g.reward),e.setStatus(g.message,g.win?"win":"lose"),s&&(s.disabled=!1,s.textContent="Купить ещё"))}function _(){if(!re(t,a)){e.setStatus("Недостаточно gcoin для покупки билета.","lose");return}const d=ce(t,a),m=Math.random()<o.winChance,w=m?d*o.multiplier:0;g={win:m,bet:d,reward:w,multiplier:o.multiplier,message:m?`Повезло! Выигрыш ${w.toFixed(2)} gcoin (x${o.multiplier}).`:"Увы, без выигрыша. Попробуйте другой билет!"};const L=r.querySelector(".ticket-result");L.innerHTML=m?`<div class="result-win">ДЖЕКПОТ!<br><span class="amount">+${w.toFixed(2)} gcoin</span></div>`:'<div class="result-lose">Не выиграл</div>',u=!1,C(),e.setStatus("Стирайте монеткой серое поле, чтобы узнать результат…",""),s&&(s.disabled=!0,T("Стирайте…"))}function R(){const d=document.createElement("div");return d.className="game-controls-row",s=document.createElement("button"),s.type="button",s.className="btn btn-primary",s.addEventListener("click",_),d.appendChild(s),d}function W(){e.configEl.appendChild(O()),e.configEl.appendChild($()),e.configEl.appendChild(p()),i&&(i.destroy(),i=null),e.stageEl.innerHTML="",c=e.stageEl,M(),e.controlsEl.appendChild(R()),I(),F(),e.setStakeInfo(a),e.setMultiplierInfo(o.multiplier,!0),T(),e.setStatus("Выберите билет и купите его, чтобы стереть поле.","")}function z(){i&&(i.destroy(),i=null),y.clear(),E.clear(),s=null,v=null,c&&(c.innerHTML="",c=null),r=null,g=null,u=!1}return{mount:W,destroy:z}}function Be(e){var $;const t="coinflip",n=e.info;let o=n.defaultBet,a=(($=n.options)==null?void 0:$[0])||"Орёл",s=!1,c=null,r=null,i=null;const u=()=>{c&&(clearTimeout(c),c=null)},g=p=>{o=Number(p),Number.isFinite(o)||(o=n.defaultBet),o=Math.min(Math.max(o,n.minBet),n.maxBet),e.setStakeInfo(o)},f=p=>{a=p,e.setStatus(`Вы выбрали ${p}.`,"")},y=p=>p==="Решка"?"tails":"heads",E=()=>{const p=document.createElement("div");p.className="game-control-group";const M=document.createElement("label");M.textContent="Размер ставки";const C=document.createElement("input");C.type="range",C.min=String(n.minBet),C.max=String(n.maxBet),C.step="1",C.value=String(o),C.className="stake-slider";const k=document.createElement("input");return k.type="number",k.min=String(n.minBet),k.max=String(n.maxBet),k.step="1",k.value=String(o),k.className="stake-input",C.addEventListener("input",_=>{k.value=_.target.value,g(_.target.value)}),k.addEventListener("change",_=>{const R=Number(_.target.value);g(R),C.value=String(o),k.value=String(o)}),p.appendChild(M),p.appendChild(C),p.appendChild(k),p},v=()=>{var k;const p=document.createElement("div");p.className="game-control-group";const M=document.createElement("label");M.textContent="Сторона монеты",p.appendChild(M);const C=document.createElement("div");return C.className="coin-choice-row",(k=n.options)==null||k.forEach(_=>{const R=document.createElement("button");R.type="button",R.className="btn btn-secondary btn-choice",R.textContent=_,_===a&&R.classList.add("active"),R.addEventListener("click",()=>{C.querySelectorAll(".btn-choice").forEach(W=>W.classList.remove("active")),R.classList.add("active"),f(_)}),C.appendChild(R)}),p.appendChild(C),p},S=()=>{const p=document.createElement("div");p.className="coin-stage";const M=document.createElement("div");M.className="coin",M.dataset.side=y(a);const C=document.createElement("div");C.className="coin-face coin-front",C.textContent="Орёл";const k=document.createElement("div");return k.className="coin-face coin-back",k.textContent="Решка",M.appendChild(C),M.appendChild(k),p.appendChild(M),r=M,p},I=(p,M)=>{if(!r)return;r.classList.remove("coin-win","coin-lose"),r.classList.add("coin-flip");const C=M.win;c=setTimeout(()=>{r.classList.remove("coin-flip"),r.style.transform=p==="Решка"?"rotateY(180deg)":"rotateY(0deg)",r.dataset.side=y(p),r.classList.add(C?"coin-win":"coin-lose"),e.setStatus(M.message,C?"win":"lose"),s=!1,i&&(i.disabled=!1,i.textContent="Бросить монету")},1500)},h=()=>{if(s)return;if(!re(t,o)){e.setStatus("Недостаточно gcoin для ставки.","lose");return}const p=ce(t,o),M=xe(a,p);e.setStatus("Монета в полёте...",""),s=!0,i&&(i.disabled=!0,i.textContent="Бросаем..."),u(),I(M.result,M)},F=()=>{const p=document.createElement("div");return p.className="game-controls-row",i=document.createElement("button"),i.type="button",i.className="btn btn-primary",i.textContent="Бросить монету",i.addEventListener("click",h),p.appendChild(i),p},T=()=>{e.configEl.appendChild(E()),e.configEl.appendChild(v()),e.stageEl.appendChild(S()),e.controlsEl.appendChild(F()),e.setStatus("Выберите сторону и сделайте ставку.",""),e.setMultiplierInfo(1,!1)},O=()=>{u(),r=null,i=null,s=!1};return g(o),f(a),{mount:T,destroy:O}}function Le(e){var L;const t="crash",n=e.info;let o=n.defaultBet,a=((L=n.multipliers)==null?void 0:L[1])||2,s=!1,c=null,r=null,i=null,u=null,g=null,f=null,y=[],E=0,v=0,S=!1,I=!1,h=0,F=0;const T=l=>{o=Number(l),Number.isFinite(o)||(o=n.defaultBet),o=Math.min(Math.max(o,n.minBet),n.maxBet),e.setStakeInfo(o)},O=l=>{var A;a=Number(l),Number.isFinite(a)||(a=((A=n.multipliers)==null?void 0:A[0])||1.5),a=Math.min(Math.max(a,1.1),n.maxAutoStop||10),e.setMultiplierInfo(a,!0)},$=()=>{const l=document.createElement("div");l.className="game-control-group";const A=document.createElement("label");A.textContent="Размер ставки";const x=document.createElement("input");x.type="range",x.min=String(n.minBet),x.max=String(n.maxBet),x.step="1",x.value=String(o),x.className="stake-slider";const B=document.createElement("input");return B.type="number",B.min=String(n.minBet),B.max=String(n.maxBet),B.step="1",B.value=String(o),B.className="stake-input",x.addEventListener("input",N=>{B.value=N.target.value,T(N.target.value)}),B.addEventListener("change",N=>{const U=Number(N.target.value);T(U),x.value=String(o),B.value=String(o)}),l.appendChild(A),l.appendChild(x),l.appendChild(B),l},p=()=>{const l=document.createElement("div");l.className="game-control-group";const A=document.createElement("label");A.textContent="Автостоп (множитель)";const x=document.createElement("input");x.type="range",x.min="1.1",x.max=String(n.maxAutoStop||10),x.step="0.1",x.value=String(a),x.className="stake-slider";const B=document.createElement("input");return B.type="number",B.min="1.1",B.max=String(n.maxAutoStop||10),B.step="0.1",B.value=String(a),B.className="stake-input",x.addEventListener("input",N=>{B.value=N.target.value,O(N.target.value)}),B.addEventListener("change",N=>{const U=Number(N.target.value);O(U),x.value=String(a),B.value=String(a)}),l.appendChild(A),l.appendChild(x),l.appendChild(B),l},M=()=>{const l=document.createElement("div");l.className="crash-stage";const A=document.createElement("canvas");return A.width=360,A.height=200,A.className="crash-canvas",l.appendChild(A),r=A,i=A.getContext("2d"),C(),l},C=()=>{!i||!r||(i.clearRect(0,0,r.width,r.height),i.fillStyle="rgba(18, 16, 42, 0.75)",i.fillRect(0,0,r.width,r.height),i.strokeStyle="rgba(125, 120, 255, 0.28)",i.lineWidth=1,i.setLineDash([4,6]),i.beginPath(),i.moveTo(0,r.height-40),i.lineTo(r.width,40),i.stroke(),i.setLineDash([]),i.fillStyle="rgba(143, 150, 199, 0.8)",i.font="12px Manrope",i.fillText("x1",6,r.height-10),i.fillText("x2",80,r.height-80),i.fillText("x5",160,r.height-140),i.fillText("x10",r.width-36,60))},k=(l,A,x)=>{if(!i||!r)return;cancelAnimationFrame(c),C(),i.strokeStyle=x?"rgba(95, 255, 211, 0.85)":"rgba(255, 92, 154, 0.85)",i.lineWidth=3,i.beginPath();const B=Math.max(A,a,...l,1.5),N=(r.height-40)/Math.max(B,1.2),U=(r.width-40)/l.length;l.forEach((ve,de)=>{const ue=20+U*de,me=r.height-ve*N;de===0?i.moveTo(ue,me):i.lineTo(ue,me)}),i.stroke(),i.fillStyle=x?"rgba(95, 255, 211, 0.9)":"rgba(255, 92, 154, 0.9)",i.beginPath();const H=l[l.length-1]||1,J=20+U*(l.length-1),be=r.height-H*N;i.arc(J,be,6,0,Math.PI*2),i.fill(),i.fillStyle="rgba(143, 150, 199, 0.85)",i.font="13px Manrope",i.textAlign="right",i.fillText(`Краш: x${A.toFixed(2)}`,r.width-12,24),i.fillText(`Автостоп: x${a.toFixed(2)}`,r.width-12,42),i.textAlign="left"};function _(l){return l<=0?1:l<=2?1+.05*l:l<=3?1.1+.1*(l-2):l<=4?1.2+.2*(l-3):1.4+.3*(l-4)}function R(l){return l<=1?0:l<=1.1?(l-1)/.05:l<=1.2?2+(l-1.1)/.1:l<=1.4?3+(l-1.2)/.2:4+(l-1.4)/.3}function W(l){const A=y.concat([l]);k(A,h,!S||I)}const z=()=>{if(s)return;if(!re(t,o)){e.setStatus("Недостаточно gcoin для ставки.","lose");return}v=ce(t,o),s=!0,S=!1,I=!1,y=[],C(),e.setStatus("Ракета взлетает... Ждите множитель или выведите вручную.",""),u&&(u.disabled=!0),g&&(g.disabled=!1),f&&(f.disabled=!1);const l=(n==null?void 0:n.volatility)||3.2,A=1+Math.random()*l;h=Number(A.toFixed(2)),F=R(h),E=performance.now();const x=()=>{const N=(performance.now()-E)/1e3,U=_(N);y.push(U);const H=N>=F&&!S&&!I;if(!S&&!I&&U>=a){const J=Number((v*a).toFixed(2));Q(J),I=!0,s=!1,W(U),e.setStatus(`Вы вывели на x${a.toFixed(2)}. Профит ${J.toFixed(2)} gcoin.`,"win"),u&&(u.disabled=!1),f&&(f.disabled=!0);return}if(H){S=!0,s=!1,W(U),e.setStatus(`Краш на x${h.toFixed(2)}. Вы не успели вывести.`,"lose"),u&&(u.disabled=!1),f&&(f.disabled=!0);return}W(U),c=requestAnimationFrame(x)};c=requestAnimationFrame(x)},d=()=>{const l=document.createElement("div");return l.className="game-controls-row",u=document.createElement("button"),u.type="button",u.className="btn btn-primary",u.textContent="Старт",u.addEventListener("click",z),f=document.createElement("button"),f.type="button",f.className="btn btn-secondary",f.textContent="Вывести сейчас",f.disabled=!0,f.addEventListener("click",()=>{if(!s||S||I)return;const x=(performance.now()-E)/1e3,B=_(x),N=Number((v*B).toFixed(2));Q(N),I=!0,s=!1,W(B),e.setStatus(`Вы вывели на x${B.toFixed(2)}. Профит ${N.toFixed(2)} gcoin.`,"win"),u&&(u.disabled=!1),f&&(f.disabled=!0)}),g=document.createElement("button"),g.type="button",g.className="btn btn-secondary",g.textContent="Очистить график",g.addEventListener("click",()=>{C(),e.setStatus("График очищен. Настройте автостоп и ставку.","")}),l.appendChild(u),l.appendChild(f),l.appendChild(g),l},m=()=>{e.configEl.appendChild($()),e.configEl.appendChild(p()),e.stageEl.appendChild(M()),e.controlsEl.appendChild(d()),e.setStatus("Настройте ставку и автостоп, затем запускайте раунд.","")},w=()=>{cancelAnimationFrame(c),c=null,r=null,i=null,u=null,g=null,f=null,y=[],s=!1};return T(o),O(a),{mount:m,destroy:w}}const Ie={lottery:Ae,coinflip:Be,crash:Le};function Me({titleEl:e,descriptionEl:t,configEl:n,stageEl:o,controlsEl:a,statusEl:s,stakeInfoEl:c,multiplierInfoEl:r}){const i={activeKey:null,activeInstance:null},u=h=>{h&&(h.innerHTML="")},g=(h="",F="")=>{s&&(s.textContent=h,s.classList.remove("game-result-win","game-result-lose"),F==="win"?s.classList.add("game-result-win"):F==="lose"&&s.classList.add("game-result-lose"))},f=h=>{c&&(typeof h=="number"?c.textContent=`Ставка: ${h.toFixed(2)} gcoin`:c.textContent=h||"Ставка: —")},y=(h,F=!0)=>{if(r){if(!F){r.style.display="none";return}r.style.display="",r.textContent=`Множитель: x${Number(h||1).toFixed(2)}`}},E=()=>{if(g("Выберите игру, чтобы начать раунд.",""),f("Ставка: —"),y(1,!1),u(n),u(o),u(a),o){const h=document.createElement("div");h.className="game-placeholder",h.textContent="Выберите игру из главного зала",o.appendChild(h)}},v=()=>{i.activeInstance&&typeof i.activeInstance.destroy=="function"&&i.activeInstance.destroy(),i.activeInstance=null,i.activeKey=null},S=h=>{var p;const F=Ie[h],T=Ce(h);if(!F||!T){console.warn("[GameManager] Unknown game key:",h);return}if(v(),u(n),u(o),u(a),g("Настройте параметры и нажмите старт.",""),typeof T.defaultBet=="number"?f(T.defaultBet):typeof T.minBet=="number"?f(T.minBet):f("Ставка: —"),T.type==="crash"){const M=((p=T.multipliers)==null?void 0:p[0])||1.5;y(M,!0)}else y(1,!1);e&&(e.textContent=T.name),t&&(t.textContent=T.description);const $=F({configEl:n,stageEl:o,controlsEl:a,setStatus:g,setStakeInfo:f,setMultiplierInfo:y,info:T});$&&typeof $.mount=="function"?($.mount(),i.activeInstance=$,i.activeKey=h):(console.warn("[GameManager] Invalid game instance for key:",h),E())},I=()=>{v(),e&&(e.textContent="Выберите игру"),t&&(t.textContent="Откройте игру из каталога, чтобы начать."),E()};return I(),{openGame:S,reset:I,hasActiveGame:()=>!!i.activeKey,getActiveGameKey:()=>i.activeKey}}function Te(e){const t={home:document.getElementById("home-view"),game:document.getElementById("game-view"),wallet:document.getElementById("wallet-view")},n=document.querySelectorAll(".nav-item"),o=()=>{Object.values(t).forEach(c=>{c&&(c.style.display="none")})},a=c=>{n.forEach(r=>{r.classList.toggle("active",r.dataset.view===c)})},s=c=>{o();const r=t[c]||t.home;r&&(r.style.display="flex")};return n.forEach(c=>{const r=c.dataset.view||"home";c.addEventListener("click",i=>{i.preventDefault(),s(r),a(r),r==="home"&&e.reset()})}),s("home"),a("home"),{switchView:s,updateNavActive:a}}function ke(){const e=document.getElementById("settings-modal"),t=document.querySelector(".settings-btn"),n=document.getElementById("close-settings-btn");t&&t.addEventListener("click",()=>{e&&(e.style.display="flex")}),n&&n.addEventListener("click",()=>{e&&(e.style.display="none")}),e&&e.addEventListener("click",o=>{o.target===e&&(e.style.display="none")})}function Ne(){return Me({titleEl:document.getElementById("active-game-title"),descriptionEl:document.getElementById("active-game-description"),configEl:document.getElementById("game-config"),stageEl:document.getElementById("game-stage"),controlsEl:document.getElementById("game-controls"),statusEl:document.getElementById("game-status"),stakeInfoEl:document.getElementById("game-stake-info"),multiplierInfoEl:document.getElementById("game-multiplier-info")})}function Fe(e,t){document.querySelectorAll(".game-card").forEach(o=>{o.addEventListener("click",()=>{const a=o.dataset.game;a&&(t.switchView("game"),t.updateNavActive("game"),e.openGame(a))})})}function _e(e,t){const n=document.getElementById("back-to-library");n&&n.addEventListener("click",()=>{e.reset(),t.switchView("home"),t.updateNavActive("home")})}function Re(){const e=Ne(),t=Te(e);ke(),Fe(e,t),_e(e,t)}const b={adsgram:{blockId:"15234",sdkUrl:"https://sad.adsgram.ai/js/sad.min.js"},monetag:{scriptUrl:"REPLACE_WITH_MONETAG_SCRIPT_URL",showFunctionName:"REPLACE_WITH_SHOW_FUNCTION",defaultOptions:{type:"end",requestVar:"ad_reward_button",timeout:15e3,catchIfNoFeed:!0}},richads:{scriptUrl:"https://richinfo.co/richpartners/telegram/js/tg-ob.js",pubId:"REPLACE_PUB_ID",appId:"REPLACE_APP_ID"},mybid:{apiBase:"https://publishers.mybid.io/backend/api/public",token:"REPLACE_MYBID_TOKEN",requestTimeoutMs:8e3},tonConnect:{manifestUrl:"https://singidranta.github.io/CasinoCash-App.io/tonconnect-manifest.json",buttonContainerId:"ton-connect-button",addressElementId:"ton-address",recipientAddress:"EQC-your-ton-address",purchase:{amount:"2",currency:"TON",description:"Gcoin top-up"}},rewards:{perAdUsd:.1},rotationKey:"ad_rotation_pref",monetagMaxConsecutive:5};function Pe(e,t){return new Promise((n,o)=>{const a=setTimeout(()=>o(new Error("MyBid request timed out")),t);e.then(s=>{clearTimeout(a),n(s)}).catch(s=>{clearTimeout(a),o(s)})})}async function ee(e,t={}){var i,u,g;const n=(i=b.mybid)==null?void 0:i.apiBase,o=(u=b.mybid)==null?void 0:u.token,a=new URL(e,n.endsWith("/")?n:n+"/");Object.entries(t).forEach(([f,y])=>{y!=null&&y!==""&&a.searchParams.set(f,String(y))}),a.searchParams.get("token")||a.searchParams.set("token",o);const s=fetch(a.toString(),{method:"GET",headers:{Accept:"application/json"},credentials:"omit"}),c=(g=b.mybid)==null?void 0:g.requestTimeoutMs,r=await Pe(s,c);if(!r.ok){const f=await r.text().catch(()=>"");throw new Error(`MyBid HTTP ${r.status} ${r.statusText} ${f==null?void 0:f.slice(0,140)}`)}return r.json().catch(()=>({}))}const $e={async stats({date1:e,date2:t,fields:n="date,impressions,clicks,money",orderBy:o="-date",limit:a=100,offset:s=0,filters:c=""}={}){return ee("stats",{date1:e,date2:t,fields:n,orderBy:o,limit:a,offset:s,filters:c})},async spots(){return ee("user-spots")},async health(){var s;const e=new Date,t=c=>c.toISOString().slice(0,10),n=t(e),o=new Date(e.getTime()-24*60*60*1e3),a=t(o);try{const c=await ee("stats",{date1:a,date2:n,fields:"date,impressions",orderBy:"-date",limit:1,offset:0});return Array.isArray((c==null?void 0:c.data)||c)?((s=c.data)==null?void 0:s.length)>0||c.length>0:!0}catch{return!1}}};function ne(){return!String(b.richads.scriptUrl).startsWith("REPLACE_")&&!0&&!String(b.richads.pubId).startsWith("REPLACE_")&&!0&&!String(b.richads.appId).startsWith("REPLACE_")}async function ge(){if(!ne())return null;try{if(await Z(b.richads.scriptUrl),!window.TelegramAdsController)throw new Error("TelegramAdsController is not available");return D||(D=new window.TelegramAdsController,D.initialize({pubId:b.richads.pubId,appId:b.richads.appId})),D}catch(e){return console.warn("[RichAds] init failed:",e.message),null}}async function Ue(){try{if(D||await ge(),!D)throw new Error("No RichAds controller");const e=["showRewarded","showInterstitial","show","run"];let t=null;for(const o of e)if(typeof D[o]=="function"){t=D[o].bind(D);break}if(!t)throw new Error("No show method on RichAds controller");return{ok:!0,provider:"richads",payload:await Promise.resolve(t())}}catch(e){return{ok:!1,provider:"richads",error:e}}}function Oe(){return!String(b.mybid.token).startsWith("REPLACE_")}async function We(){if(!Oe())return!1;try{return!!await $e.health()}catch{return!1}}const V=new Map;let Y=null,D=null,j=0;function De(){return typeof window<"u"&&window.Telegram&&window.Telegram.WebApp}function Ge(){return!String(b.monetag.scriptUrl).startsWith("REPLACE_")&&!0}function ae(){return!String(b.adsgram.blockId).startsWith("REPLACE_")}function Ke(){const e=Number(localStorage.getItem("adsgram_disabled_until")||0);return Number.isFinite(e)?e:0}function oe(){return Ke()>Date.now()}function He(e,t=""){try{const n=Date.now()+Math.max(0,e);localStorage.setItem("adsgram_disabled_until",String(n)),console.warn("[AdsGram] Temporarily disabled until",new Date(n).toISOString(),t||"")}catch{}}function Z(e){return new Promise((t,n)=>{if(!e||e.startsWith("REPLACE_WITH"))return n(new Error("Script URL is not configured"));if(V.has(e)){const c=V.get(e);if(c==="loaded")return t();if(c&&c.then)return c.then(t).catch(n)}const o=document.querySelector(`script[src="${e}"]`);if(o)return o.dataset.loaded="true",V.set(e,"loaded"),t();const a=document.createElement("script");a.src=e,a.async=!0,a.referrerPolicy="no-referrer-when-downgrade",a.addEventListener("load",()=>{a.dataset.loaded="true",V.set(e,"loaded"),t()}),a.addEventListener("error",()=>{V.delete(e),n(new Error(`Failed to load script ${e}`))}),document.head.appendChild(a);const s=new Promise((c,r)=>{a.addEventListener("load",()=>c()),a.addEventListener("error",()=>r(new Error(`Failed to load script ${e}`)))});V.set(e,s)})}async function he(){if(!ae())return console.warn("[AdsGram] blockId is not configured. Skipping init."),null;if(oe())return console.warn("[AdsGram] temporarily disabled, skipping init"),null;try{!window.Telegram&&!document.querySelector('script[src="https://telegram.org/js/telegram-web-app.js"]')&&await Z("https://telegram.org/js/telegram-web-app.js")}catch(e){console.warn("[AdsGram] Telegram SDK not loaded:",e.message)}if(window.Adsgram&&typeof window.Adsgram.init=="function"||await Z(b.adsgram.sdkUrl),!window.Adsgram||typeof window.Adsgram.init!="function")return console.warn("[AdsGram] SDK not available after script load"),null;try{return Y=window.Adsgram.init({blockId:b.adsgram.blockId}),Y}catch(e){return console.warn("[AdsGram] init failed:",e.message),null}}async function qe(){try{if(Y||await he(),!Y||!Y.show)throw new Error("AdsGram controller not available");return{ok:!0,provider:"adsgram",payload:await Y.show()}}catch(e){try{const t=String((e==null?void 0:e.message)||e||"").toLowerCase();(t.includes("not active")||t.includes("moderation"))&&He(6*60*60*1e3,"block inactive/moderation")}catch{}return{ok:!1,provider:"adsgram",error:e}}}async function Ve(){var e;try{if(!b.monetag.scriptUrl||b.monetag.scriptUrl.startsWith("REPLACE_"))throw new Error("Monetag script URL is not configured");await Z(b.monetag.scriptUrl);const t=b.monetag.showFunctionName,n=t&&window[t];if(typeof n!="function")throw new Error(`Monetag show function ${t} is not available`);const o={...b.monetag.defaultOptions};if(De())try{const s=(e=window.Telegram.WebApp.initDataUnsafe)==null?void 0:e.user;s&&s.id&&(o.ymid=String(s.id))}catch{}return{ok:!0,provider:"monetag",payload:await n(o)}}catch(t){return{ok:!1,provider:"monetag",error:t}}}function je(){const e=b.rotationKey,t=localStorage.getItem(e);return t==="monetag"||t==="adsgram"?t:(localStorage.setItem(e,"monetag"),"monetag")}const ye={async init(){ae()&&!oe()&&he().catch(e=>console.warn("[AdsGram] preload failed:",e.message)),ne()&&ge().catch(e=>console.warn("[RichAds] preload failed:",e.message)),je();try{j=Number(localStorage.getItem("monetag_consecutive_count")||"0")||0}catch{j=0}},async showRewardedAd(){var c;const e=Ge(),t=ne(),n=ae()&&!oe();if(!e&&!t&&!n)return{ok:!1,error:{message:await We()?"No ad SDKs configured":"Ad backends unavailable"}};const o=e&&j<b.monetagMaxConsecutive,a=[];o&&a.push("monetag"),t&&a.push("richads"),n&&a.push("adsgram"),!o&&e&&a.push("monetag");let s=null;for(const r of a){let i;if(r==="monetag"?i=await Ve():r==="richads"?i=await Ue():i=await qe(),i.ok){i.provider==="monetag"?j+=1:j=0;try{localStorage.setItem("monetag_consecutive_count",String(j))}catch{}return i}s=((c=i.error)==null?void 0:c.message)||String(i.error||"unknown error")}return{ok:!1,error:{message:s||"All providers failed"}}}},Ye="https://raw.githubusercontent.com/ton-connect/sdk/main/assets/tonconnect-logo.png";function G(...e){console.info("[TonConnect]",...e)}function pe(e,t){console.groupCollapsed(`[TonConnect] ${e}`);try{t()}finally{console.groupEnd()}}function K(...e){console.error("[TonConnect]",...e)}let P=null,X=null;const ze=new Set;function te(e){const t=e&&e.account?e.account:e;le(t),ze.forEach(n=>{try{n(t||null)}catch(o){console.warn("[TonConnect] subscriber error",o)}});try{window.dispatchEvent(new CustomEvent("ton-status",{detail:t||null}))}catch{}}function Je(e){const t=e,n=window.location.href.split("#")[0].split("?")[0],o=n.endsWith("/")?n:`${n.substring(0,n.lastIndexOf("/")+1)}`;try{const s=new URL(t,o).toString();return G("Resolved manifest URL:",s),s}catch(a){K("Manifest URL resolution failed relative to page. Falling back to origin root.",a);try{return new URL(t,window.location.origin+"/").toString()}catch(s){throw new Error(`TonConnect invalid manifest URL: ${s.message}`)}}}function Xe(){try{const{origin:e,pathname:t}=window.location,n=t.endsWith("/")?t:t.substring(0,t.lastIndexOf("/")+1);return`${e}${n}`}catch(e){return K("Failed to derive app base URL:",e),null}}function Qe(e,t){if(!e||typeof e!="object")return{manifest:null,changed:!1};const n={...e};let o=!1;const a=Xe();n.url||a&&(n.url=a,o=!0),n.name||(n.name=(b==null?void 0:b.appName)||document.title||"TonConnect App",o=!0);const s=typeof n.iconUrl=="string"?n.iconUrl:"";return(!s||s.endsWith(".svg")||s.startsWith("data:image/svg"))&&(n.iconUrl=Ye,o=!0),{manifest:n,changed:o}}async function Ze(e){try{pe(`Manifest preflight → ${e}`,()=>{G("Initiating fetch with no-cache headers")});const t=await fetch(e,{method:"GET",cache:"no-store",mode:"cors"});if(!t.ok){const a=await t.text().catch(()=>"<<unreadable>>");throw new Error(`HTTP ${t.status}. Body preview: ${a.slice(0,180)}`)}const n=await t.clone().text().catch(()=>null),o=(()=>{try{return JSON.parse(n||"{}")}catch(a){return K("Manifest JSON parse failed:",a),null}})();return pe("Manifest content preview",()=>{G("HTTP status:",t.status,t.statusText),o?G("Fields:",JSON.stringify(o,null,2)):G("Raw text:",n==null?void 0:n.slice(0,500))}),{manifestJson:o,manifestText:n}}catch(t){throw K("Manifest fetch failed:",t),t}}function le(e){var n;const t=document.getElementById((n=b.tonConnect)==null?void 0:n.addressElementId);if(t)if(e!=null&&e.address){const o=`${e.address.slice(0,6)}...${e.address.slice(-4)}`;t.textContent=o,t.dataset.full=e.address,t.classList.add("connected")}else t.textContent="Не подключено",t.dataset.full="",t.classList.remove("connected")}function et(){var t;const e=document.getElementById((t=b.tonConnect)==null?void 0:t.addressElementId);e&&(e.style.cursor="pointer",e.addEventListener("click",async()=>{const n=e.dataset.full||"";if(n)try{await navigator.clipboard.writeText(n);const o=e.textContent;e.textContent="Copied!",setTimeout(()=>le((P==null?void 0:P.account)||null)||(e.textContent=o),1e3)}catch(o){console.warn("[TonConnect] clipboard copy failed",o)}}))}async function tt(){var c,r,i;const e=(c=b.tonConnect)==null?void 0:c.buttonContainerId,t=Je((r=b.tonConnect)==null?void 0:r.manifestUrl),n=await Ze(t);let o=t;const{manifest:a,changed:s}=Qe((n==null?void 0:n.manifestJson)||null);s&&a&&G("Manifest needs adjustments (url/icon). Update the remote file if possible.",a);try{P=new fe({manifestUrl:o,buttonRootId:e,language:"ru"}),G("TonConnectUI instance created. Version:",((i=fe)==null?void 0:i.version)||"unknown")}catch(u){throw K("Failed to create TonConnectUI instance:",u,u==null?void 0:u.stack),u}et(),le(P.account),P.onStatusChange(u=>{G("Status change → wallet",u?u.account:"null"),te(u)},u=>{K("Status change error:",u),te(null)});try{const u=await P.connectionRestored;G("connectionRestored resolved →",u),u&&te(P.account)}catch(u){K("Connection restoration failed:",u)}return P}function we(){return X||(X=tt().catch(e=>(K("init failed:",(e==null?void 0:e.message)||e),P=null,X=null,null))),X}function nt(){return P}async function at(){const e=await we();return e||K("ensureTonConnectReady → TonConnectUI unavailable"),e}function ot(){var e;P&&((e=P.openModal)==null||e.call(P))}function it(e){const t=Number(e);return!Number.isFinite(t)||t<=0?null:BigInt(Math.round(t*1e9)).toString()}async function st(){var c,r,i,u,g,f,y,E,v;const e=nt()||await at();if(!e){alert("TonConnect UI не инициализирован. Проверьте manifestUrl.");return}if(!e.account){ot(),alert("Подключите TON-кошелёк, чтобы продолжить.");return}const t=localStorage.getItem("ton_recipient")||((c=b.tonConnect)==null?void 0:c.recipientAddress),n=it((i=(r=b.tonConnect)==null?void 0:r.purchase)==null?void 0:i.amount);if(!n){alert("Параметры TON-покупки не настроены.");return}const o={address:t,amount:n},a=(g=(u=b.tonConnect)==null?void 0:u.purchase)==null?void 0:g.payloadHex;a&&(o.payload=a);const s={validUntil:Math.round(Date.now()/1e3)+(((y=(f=b.tonConnect)==null?void 0:f.purchase)==null?void 0:y.ttl)||300),messages:[o]};try{await e.sendTransaction(s);const S=((v=(E=b.tonConnect)==null?void 0:E.purchase)==null?void 0:v.successMessage)||"Платёж в TON отправлен! После подтверждения пополните баланс вручную.";alert(S)}catch(S){console.warn("[TON Purchase] sendTransaction failed",S);const I=(S==null?void 0:S.message)||"Не удалось отправить транзакцию TON.";alert(I)}}function rt(){const e=document.getElementById("exchange-modal"),t=document.getElementById("exchange-btn"),n=document.getElementById("close-exchange-btn"),o=document.getElementById("confirm-exchange-btn"),a=document.getElementById("ad-reward-btn"),s=document.getElementById("buy-ton-btn"),c=document.getElementById("from-amount"),r=document.getElementById("from-currency"),i=document.getElementById("to-amount"),u=document.getElementById("to-currency"),g=200;t&&t.addEventListener("click",()=>{e&&(e.style.display="flex")}),n&&n.addEventListener("click",()=>{e&&(e.style.display="none")});const f=()=>{const y=parseFloat((c==null?void 0:c.value)||"0")||0,E=(r==null?void 0:r.value)||"real_balance";let v=0;E==="real_balance"?(u&&(u.value="gcoin"),v=y*g):(u&&(u.value="real_balance"),v=y/g),i&&(i.value=v.toFixed(2))};if(c&&c.addEventListener("input",f),r&&r.addEventListener("change",f),o&&o.addEventListener("click",()=>{const y=parseFloat((c==null?void 0:c.value)||"0")||0,E=(r==null?void 0:r.value)||"real_balance",v=(u==null?void 0:u.value)||"gcoin",S=parseFloat((i==null?void 0:i.value)||"0")||0;if(y<=0){alert("Введите корректную сумму / Please enter a valid amount.");return}if(q.getBalance(E)<y){alert("Недостаточно средств для обмена / Insufficient funds for this exchange.");return}q.subtract(y,E),q.add(S,v),alert("Обмен выполнен! / Exchange successful!"),e&&(e.style.display="none"),c&&(c.value=""),i&&(i.value="")}),a){const y=a.innerHTML;a.addEventListener("click",async()=>{try{a.disabled=!0,a.innerHTML="Поиск рекламы… / Searching for ad…";const E=await ye.showRewardedAd();if(E&&E.ok){const v=E.provider,S=E.payload||{};let I=!1;if(v==="monetag"?I=S&&S.reward_event_type==="valued":v==="adsgram"?I=!!S&&S.done===!0:v==="richads"&&(I=!0),I){const h=Number(b.rewards.perAdUsd||.1);q.add(h,"real_balance"),alert(`Реклама (${v}) просмотрена! Начислено $${h.toFixed(2)}.
Ad viewed successfully! Provider: ${v}. You've earned $${h.toFixed(2)}.`)}else alert(`Реклама не была досмотрена до конца или не засчитана. Награда не начислена.
Ad was not completed or not eligible.`)}else alert(`Ошибка рекламы, попробуйте позже.
Ad error, please try again later.`)}catch(E){console.warn("Ad error:",E),alert(`Ошибка рекламы, попробуйте позже.
Ad error, please try again later.`)}finally{a.disabled=!1,a.innerHTML=y}})}s&&s.addEventListener("click",()=>{st()})}window.addEventListener("DOMContentLoaded",()=>{try{window.Telegram&&window.Telegram.WebApp&&typeof window.Telegram.WebApp.ready=="function"&&window.Telegram.WebApp.ready()}catch{}q.init(),Ee.init(),Re(),ye.init(),rt(),we(),console.log("App initialized.")});
